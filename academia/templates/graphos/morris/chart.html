<script type="text/javascript">
var custom_options = {{chart.get_options_json|safe}};
var options_{{ chart.get_html_id }} = {
  resize: true,
  hideHover: 'auto',
  // ID of the element in which to draw the chart.
  element: '{{ chart.get_html_id }}',
  // Chart data records -- each entry in this array corresponds to a point on
  // the chart.
  data: {{ chart.get_data_json|safe }},
  // The name of the data record attribute that contains x-values.
  xkey: '{{ chart.get_category_key }}',
  // A list of names of data record attributes that contain y-values.
  ykeys: {{ chart.get_y_keys|safe }},
  // Labels for the ykeys -- will be displayed when you hover over the
  // chart.
  labels: {{ chart.get_y_keys|safe }},
  // post units
  postUnits: '{{ chart.get_options.postUnits|safe }}',
  preUnits: '{{ chart.get_options.preUnits|safe }}',
  
  xLabelFormat: function(x) {
    return x.getDate()+'-'+x.getMonth()+'-'+x.getYear() % 100
  },
  dateFormat: function(ms) {
    dt = new Date(ms)
    return dt.getDate()+'-'+dt.getMonth()+'-'+dt.getYear() % 100
  }
};
for(option in custom_options) {
  options_{{ chart.get_html_id }}[option] = custom_options[option]
}
$(document).ready(function() {
  new Morris.{{ chart.chart_type }}(options_{{ chart.get_html_id }})
})
</script>